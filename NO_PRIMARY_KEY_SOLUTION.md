# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞

## üéØ –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `comments` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
[00:18:22.903] –ù–∞—á–∏–Ω–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã 'comments'
[00:18:23.070] –ù–∞–π–¥–µ–Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π: 0 ()
[00:18:23.070] –û–®–ò–ë–ö–ê: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è: –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏
```

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. üîç –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–π

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `ITableRepository` –∏ `TableRepository`**:
- `GetUniqueColumnsAsync()` - –ø–æ–∏—Å–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ (PRIMARY KEY + UNIQUE)
- `GetAllColumnsAsync()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
- `UpdateRowByAllColumnsAsync()` - UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º

### 2. üîÑ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è UPDATE

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º**:

1. **–£—Ä–æ–≤–µ–Ω—å 1**: –ò—â–µ–º –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ (PRIMARY KEY)
2. **–£—Ä–æ–≤–µ–Ω—å 2**: –ï—Å–ª–∏ PK –Ω–µ—Ç ‚Üí –∏—â–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (UNIQUE)
3. **–£—Ä–æ–≤–µ–Ω—å 3**: –ï—Å–ª–∏ –∏ –∏—Ö –Ω–µ—Ç ‚Üí UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º —Å WHERE –ø–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º

### 3. ‚ö†Ô∏è –î–∏–∞–ª–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**–°–æ–∑–¥–∞–Ω –¥–∏–∞–ª–æ–≥ `TableWarningDialog`** –∫–æ—Ç–æ—Ä—ã–π:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –∫–ª—é—á–µ–π
- –û–±—ä—è—Å–Ω—è–µ—Ç —Ä–∏—Å–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å
- –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã

### 4. üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ü–æ–∏—Å–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–ª—é—á–µ–π
- –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è UPDATE
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–µ—Ç–æ–¥ `UpdateRowByAllColumnsAsync`

```sql
UPDATE table_name 
SET col1 = @new_col1, col2 = @new_col2, ...
WHERE col1 = @orig_col1 AND col2 = @orig_col2 AND col3 IS NULL AND ...
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- WHERE —É—Å–ª–æ–≤–∏–µ —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ **–≤—Å–µ–º** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
- NULL –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `IS NULL`
- –ù–µ-NULL –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –î–∏–∞–ª–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –∫–ª—é—á–µ–π
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á

## üìã –õ–æ–≥–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ PK

### –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:
```
[12:34:56.789] –ù–∞—á–∏–Ω–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã 'comments'
[12:34:56.790] –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π...
[12:34:56.795] –ù–∞–π–¥–µ–Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π: 0 ()
[12:34:56.796] –ü–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ò—â–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏...
[12:34:56.801] –ù–∞–π–¥–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫: 0 ()
[12:34:56.802] –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º
[12:34:56.803] ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –í—ã–ø–æ–ª–Ω—è–µ–º UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º (—Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ –∫–ª—é—á–µ–π)
[12:34:56.804] –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è UPDATE...
[12:34:56.805] –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏: id=1, comment=new_comment, author=john
[12:34:56.806] –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: id=1, comment=old_comment, author=john
[12:34:56.815] ‚úì –£–°–ü–ï–®–ù–û: –ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (3 –ø–æ–ª–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ)
```

### SQL –≤ Debug Output:
```
[SQL] UPDATE –±–µ–∑ PK –∑–∞–ø—Ä–æ—Å: UPDATE comments SET id = @new_id, comment = @new_comment, author = @new_author WHERE id = @orig_id AND comment = @orig_comment AND author = @orig_author
[SQL] UPDATE –±–µ–∑ PK —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 1 —Å—Ç—Ä–æ–∫ –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### –†–∏—Å–∫–∏ UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º:

1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ï—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
3. **–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å**: –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ —Å—Ç—Ä–æ–∫–∞ –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á**:
   ```sql
   ALTER TABLE comments ADD COLUMN id SERIAL PRIMARY KEY;
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**:
   ```sql
   ALTER TABLE comments ADD CONSTRAINT unique_comment UNIQUE (comment, author);
   ```

3. **–°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á**:
   ```sql
   ALTER TABLE comments ADD PRIMARY KEY (comment, author, created_at);
   ```

## üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –î–ª—è —Ç–∞–±–ª–∏—Ü —Å –∫–ª—é—á–∞–º–∏:
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ
- –ë—ã—Å—Ç—Ä—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ UPDATE –∑–∞–ø—Ä–æ—Å—ã

### –î–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ –∫–ª—é—á–µ–π:
1. **–ü–µ—Ä–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç**: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å
3. **–ü—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º
4. **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –î–∏–∞–ª–æ–≥ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–¢–∞–±–ª–∏—Ü–∞ —Å PK**: –û–±—ã—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **–¢–∞–±–ª–∏—Ü–∞ —Å UNIQUE**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π
3. **–¢–∞–±–ª–∏—Ü–∞ –±–µ–∑ –∫–ª—é—á–µ–π**: –î–∏–∞–ª–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è + UPDATE –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∏—Å–∫–µ –∫–ª—é—á–µ–π
- –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
- SQL –∑–∞–ø—Ä–æ—Å—ã –≤ Debug Output

## üìà –°—Ç–∞—Ç—É—Å

üü¢ **–†–ï–®–ï–ù–û** - –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—é–±—ã—Ö —Ç–∞–±–ª–∏—Ü —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
